<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>
        <record id="crm_lead_form_view_inherit" model="ir.ui.view">
            <field name="name">crm.lead.form.view.inherit</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="bi_new_customized_fields.inherited_view_crm_lead_new_fields_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='proposals_engineer_id']" position="before">
                    <label for="is_existing_opportunity" string="Is it an existing opportunity?"
                           attrs="{'invisible': [('type', '!=', 'opportunity')]}"/>
                    <field name="is_existing_opportunity" nolabel="1"
                           attrs="{'invisible': [('type', '!=', 'opportunity')]}"/>
                    <field name="parent_opportunity_id"
                           attrs="{'invisible':['|', ('is_existing_opportunity', '=', False), ('type', '!=', 'opportunity')], 'required':[('is_existing_opportunity', '=', True)]}"/>
                    <field name="letter_identifier" force_save="1" attrs="{'invisible':['|', ('is_existing_opportunity', '=', False), ('type', '!=', 'opportunity')], 'required':[('is_existing_opportunity', '=', True)], 'readonly':True}"/>
                    <field name="next_letter_sequence" invisible="1"/>
                    <field name="serial_number" attrs="{'invisible': [('type', '!=', 'opportunity')]}" readonly="1"/>
                </xpath>
                <xpath expr="//field[@name='type_custom']" position="after">
                    <field name="internal_opportunity_name"/>
                </xpath>
                <xpath expr="//field[@name='project_num']" position="attributes">
                    <attribute name="required">0</attribute>
                </xpath>
            </field>
        </record>
    </data>
</odoo>