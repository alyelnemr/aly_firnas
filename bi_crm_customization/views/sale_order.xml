<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="inherited_view_sale_order_new_fields_form" model="ir.ui.view">
            <field name="name">sale.order.form.inherit.form</field>
            <field name="model">sale.order</field>
            <field name="priority">99</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//group//group[@name='utm_link']//field[@name='source_id']" position="replace">
                </xpath>
                <xpath expr="//field[@name='pricelist_id']" position="replace">
                </xpath>
                <xpath expr="//field[@name='payment_term_id']" position="replace">
                    <field name="payment_term_id" options="{'no_open':True,'no_create': True}"/>
                    <field name="pricelist_id" groups="product.group_product_pricelist" options="{'no_open':True,'no_create': True}"/>
                    <label for="is_manual"></label>
                    <div class="o_row">
                        <field name="is_manual" nolabel="1"
                               attrs="{'invisible': [('state','!=','draft')]}"/>
                        <field name="custom_rate" nolabel="1"
                               attrs="{'invisible': ['|', ('is_manual', '=', False), ('state','!=','draft')], 'required':[('is_manual', '=', True)]}"/>
                        <button name="action_update_factor" type="object" string=" Update "
                                attrs="{'invisible': ['|', ('is_manual', '=', False), ('state','!=','draft')]}"
                                class="btn-link mb-1 px-0" icon="fa-refresh"/>
                    </div>
                    <field name="warehouse_id" options="{'no_create': True}" force_save="1"/>
                    <field name="sale_order_template_id" context="{'company_id': company_id}"
                           options="{'no_create': True, 'no_open': True}" />
                </xpath>
                <xpath expr="//field[@name='validity_date']" position="replace">
                    <field name="date_order" attrs="{'required': [('state', 'in', ['sale', 'done'])], 'invisible': [('state', 'in', ['draft', 'sent'])]}" nolabel="1"/>
                    <field name="validity_date" />
                </xpath>
                <xpath expr="//field[@name='client_order_ref']" position="replace">
                </xpath>
                <xpath expr="//page[@name='other_information']" position="replace">
                </xpath>
                <xpath expr="//page[@name='customer_signature']" position="replace">
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="partner_contact"/>
                    <field name="client_order_ref"/>
                    <field name="invoice_status" invisible="1"/>
                    <field name="company_id" invisible="1"/>
                </xpath>
                <xpath expr="//notebook" position="inside">
                    <page name="info" string="Information">
                        <group>
                            <group string="Print">
                                <field name="financial_proposal_number" />
                                <field name="financial_proposal_title"/>
                                <field name="project_name"/>
                                <field name="document_name"/>
                                <field name="file_name"/>
                            </group>
                            <group string="Analysis">
                                <field name="opportunity_id" />
                                <field name="user_id" string="Opportunity Manager"/>
                                <field name="source_id" />
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="is_print_payment_schedule" nolabel="1" />
                                <field name="standard_payment_schedule" />
                            </group>
                            <group>
                                <field name="is_print_terms_and_conditions" nolabel="1" />
                                <field name="terms_and_conditions" />
                            </group>
                        </group>
                        <group>
                            <group string="Delivery">
                                <field name="warehouse_id" options="{'no_create': True}" required="0" groups="stock.group_stock_multi_warehouses" force_save="1"/>
                                <field name="picking_policy" required="0"/>
                                <label for="commitment_date" string="Delivery Date"/>
                                <div class="o_row">
                                    <field name="commitment_date"/> <span class="text-muted">Expected: <field name="expected_date" widget="date"/></span>
                                </div>
                            </group>
                            <group name="sale_info" string="Invoicing">
                                <field name="fiscal_position_id" options="{'no_create': True}"/>
                                <field name="require_signature"/>
                                <field name="require_payment"/>
                            </group>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>
        <record id="aly_sale_order_form_quote" model="ir.ui.view">
            <field name="name">aly.sale.order.form.quote.form</field>
            <field name="model">sale.order</field>
            <field name="priority">99</field>
            <field name="inherit_id" ref="sale_management.sale_order_form_quote"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='sale_order_template_id']" position="replace">
                </xpath>
            </field>
        </record>

    </data>
</odoo>