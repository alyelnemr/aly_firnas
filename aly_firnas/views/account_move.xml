<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>

        <record id="aly_account_journal_form_inherit" model="ir.ui.view">
            <field name="name">aly.account.journal.form.inherit.online.sync</field>
            <field name="model">account.journal</field>
            <field name="inherit_id" ref="account.view_account_journal_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='type']" position="after">
                    <field name="is_expense_module" />
                </xpath>
            </field>
        </record>

        <record id="view_move_form_currency_rate_inherit" model="ir.ui.view">
            <field name="name">view.move.form.currency.rate.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="priority">99</field>
            <field name="arch" type="xml">
                <xpath expr="//page[last()]" position="after">
                    <page id="page_terms" string="Terms" groups="account.group_account_user">
                        <group>
                            <group>
                                <field name="is_print_terms_and_conditions" attrs="{'invisible': [('type', 'not in', ('out_invoice', 'in_invoice'))]}"/>
                                <field name="terms_and_conditions" widget="html" attrs="{'invisible': [('type', 'not in', ('out_invoice', 'in_invoice'))]}"/>
                            </group>
                        </group>
                    </page>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='product_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_quick_create': True, 'no_create_edit':True}</attribute>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='product_uom_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_quick_create': True, 'no_create_edit':True}</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="attrs">
                        {'required': [('type', 'in', ('in_invoice', 'out_invoice'))]}
                    </attribute>
                    <field name="analytic_tag_ids" widget="many2many_tags" required="1"
                           attrs="{'invisible': [('type', 'not in', ('entry', 'in_invoice', 'out_invoice', 'in_refund', 'in_receipt'))]}"/>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="replace">
                    <field name="partner_id" widget="res_partner_many2one" nolabel="1" context="{
                    'res_partner_search_mode': (context.get('default_type', 'entry') in ('out_invoice', 'out_refund', 'out_receipt') and 'customer') or (context.get('default_type', 'entry') in ('in_invoice', 'in_refund', 'in_receipt') and 'supplier') or False,
                    'show_address': 0, 'default_is_company': True, 'show_vat': True
                    }" options="{&quot;always_reload&quot;: True, &quot;no_quick_create&quot;: True}"
                           attrs="{'invisible': [('type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}"/>
                </xpath>
                <xpath expr="//field[@name='partner_shipping_id']" position="replace">
                </xpath>
                <xpath expr="//field[@name='invoice_partner_bank_id']" position="replace">
                </xpath>
                <xpath expr="//field[@name='ref']" position="replace">
                </xpath>
                <xpath expr="//field[@name='company_id']" position="replace">
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="partner_contact" attrs="{'invisible': [('type', 'not in', ('out_invoice'))]}"/>
                    <field name="ref"/>
                    <field name="partner_invoice_id"
                           context="{'default_is_company': True, 'show_vat': True}"
                           attrs="{'invisible': [('type', 'not in', ('out_invoice'))]}"/>
                    <field name="partner_shipping_id"
                           context="{'default_is_company': True, 'show_vat': True}"
                           attrs="{'invisible': [('type', 'not in', ('out_invoice'))]}"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="analytic_account_id" required="1"
                           attrs="{'invisible': [('type', 'not in', ('entry', 'in_invoice', 'out_invoice', 'in_refund', 'in_receipt'))]}"/>
                    <field name="analytic_tag_ids" widget="many2many_tags" required="1"
                           attrs="{'invisible': [('type', 'not in', ('entry', 'in_invoice', 'out_invoice', 'in_refund', 'in_receipt'))]}"/>
                    <field name="invoice_partner_bank_id" domain="[('partner_id', '=', bank_partner_id)]" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    <field name="p_order_id"
                           groups="base.group_no_one"
                           attrs="{'readonly': [('p_order_id', '=', 'purchase_id')], 'invisible': [('type', 'not in', ('in_invoice'))]}"/>
                    <field name="s_order_id"
                           groups="base.group_no_one"
                           attrs="{'invisible': [('type', 'not in', ('out_invoice'))]}"/>
                    <field name="purchase_order_id" invisible="1"/>
                    <field name="sale_order_id" invisible="1"/>
                </xpath>
                <xpath expr="//div[@name='button_box']" position="inside">
                    <button class="oe_stat_button o_res_partner_tip_opp" type="object"
                            name="action_view_purchase_order"
                            icon="fa-pencil-square-o" attrs="{'invisible': [('purchase_order_id', '=', False)]}">
                        <span>Purchase Order</span>
                    </button>
                    <button class="oe_stat_button o_res_partner_tip_opp" type="object"
                            name="action_view_sale_order"
                            icon="fa-pencil-square-o" attrs="{'invisible': [('sale_order_id', '=', False)]}">
                        <span>Sales Order</span>
                    </button>
                </xpath>
                <xpath expr="//field[@name='currency_id']" position="after">
                    <field name="is_manual" invisible="1"/>
                    <label
                            for="manual_currency"
                            groups="base.group_multi_currency"
                            attrs="{'invisible': [('is_manual', '=', False)]}"
                    />
                    <div groups="base.group_multi_currency" attrs="{'invisible': [('is_manual', '=', False)]}" class="o_row">
                        <field
                                name="manual_currency"
                                attrs="{'invisible': [('is_manual', '=', False)], 'readonly': [('state', '!=', 'draft')]}"
                        />
                        <field
                                name="custom_rate_conversely"
                                attrs="{'invisible': [('manual_currency', '=', False)], 'readonly': [('state', '!=', 'draft')]}"
                        />
                        <button name="action_refresh_currency" states="draft" type="object" string=" Update " class="btn-link mb-1 px-0" icon="fa-refresh"
                        attrs="{'invisible': [('is_manual', '=', False)]}"/>
                    </div>
                    <field name="accountant_id" />
                </xpath>
                <xpath expr="//field[@name='date']" position="attributes">
                    <attribute name="attrs">{'invisible': False}</attribute>
                    <attribute name="modifiers">
                        {'invisible':False,'readonly':[['state','not
                        in',['draft']]],'required':true}</attribute>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree/field[@name='account_id']" position="attributes">
                    <attribute name="optional">show</attribute>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='product_id']" position="before">
                    <field name="is_printed" force_save="1"/>
                    <field name="line_rank" string="Sn" width="12px" readonly="1" optional="show"/>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree/field[@name='product_id']" position="before">
                    <field name="is_printed" force_save="1"/>
                    <field name="line_rank" string="Sn" width="12px" readonly="1" optional="show"/>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree/field[@name='partner_id']" position="attributes">
                    <attribute name="optional">show</attribute>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree/field[@name='currency_id']" position="attributes">
                    <attribute name="optional">show</attribute>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree/field[@name='debit']" position="attributes">
                    <attribute name="optional">show</attribute>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree/field[@name='credit']" position="attributes">
                    <attribute name="optional">show</attribute>
                </xpath>
            </field>
        </record>

        <record id="aly_view_invoice_tree_inherit" model="ir.ui.view">
            <field name="name">view.invoice.tree.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_invoice_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="partner_id"/>
                    <field name="note"/>
                </xpath>
                <xpath expr="//field[@name='amount_total_signed']" position="before">
                    <field name="amount_line_currency_field" invisible="1"/>
                    <field name="amount_line" widget="monetary" options="{'currency_field': 'amount_line_currency_field'}"/>
                </xpath>
                <xpath expr="//field[@name='amount_untaxed_signed']" position="after">
                    <field name="amount_currency_field" invisible="1"/>
                    <field name="amount_in_currency" widget="monetary" options="{'currency_field': 'amount_currency_field'}"/>
                </xpath>
                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="analytic_account_id" optional="show"/>
                    <field name="analytic_tag_ids" widget="many2many_tags" optional="show"/>
                </xpath>
            </field>
        </record>

        <record id="aly_inherit_account_move_line_tree_view" model="ir.ui.view">
            <field name="name">account.move.line.tree.view</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_move_line_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='credit']" position="after">
                    <field name="balance"/>
                </xpath>
                <xpath expr="//field[@name='name']" position="after">
                    <field name="note"/>
                </xpath>
                <xpath expr="//field[@name='account_id']" position="after">
                    <field name="analytic_account_id" optional="show"/>
                    <field name="analytic_tag_ids" widget="many2many_tags" optional="show"/>
                </xpath>
            </field>
        </record>


        <record id="view_move_tree_inherit" model="ir.ui.view">
            <field name="name">view.move.tree.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="analytic_account_id" optional="show"/>
                    <field name="analytic_tag_ids" widget="many2many_tags" optional="show"/>
                </xpath>
            </field>
        </record>

    </data>
</odoo>